<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Telephony on ivahaev.ru</title>
    <link>https://ivahaev.ru/tags/telephony/index.xml</link>
    <description>Recent content in Telephony on ivahaev.ru</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ru-RU</language>
    <copyright>2016 Евгений Иваха</copyright>
    <atom:link href="https://ivahaev.ru/tags/telephony/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Умный колбэк</title>
      <link>https://ivahaev.ru/post/smart-callback/</link>
      <pubDate>Mon, 23 Nov 2015 00:57:54 +0500</pubDate>
      
      <guid>https://ivahaev.ru/post/smart-callback/</guid>
      <description>&lt;p&gt;В настоящее время сложно предложить клиентам что-то действительно уникальное, конкурентная борьба переходит в иные плоскости. Сегодняшние клиенты довольно разборчивы. Цена продукта уже не всегда играет решающую роль, покупатели ценят сервис.&lt;/p&gt;

&lt;p&gt;Естественно, многие компании придумывают различные способы привлечения и удержания клиентов. Рассмотрим вариант, как правильно настроенный на принятие входящих звонков телефонный сервис поможет не терять потенциальных и удерживать существующих клиентов.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;Я специально не буду касаться модных нынче сервисов звонка с сайта, в данной статье рассматривается ситуация, когда клиент сам звонит в нашу компанию, важно его не упустить, пока горяченький.&lt;/p&gt;

&lt;h3 id=&#34;боремся-за-клиента-любой-ценой&#34;&gt;Боремся за клиента любой ценой&lt;/h3&gt;

&lt;p&gt;Потенциальный клиент, впервые пытающийся обратиться в вашу компанию по телефону, если вы не обладаете действительно уникальным продуктом, не будет терять много времени ожидая, когда ему ответит ваш специалист. Как показывает практика, ожидание ответа может составлять от 30 секунд до двух минут максимум, а когда не дожидается ответа, просто звонит в другую компанию. Возможно, ваш номер он забудет уже через минуту.&lt;/p&gt;

&lt;p&gt;Можно бороться с подобной ситуацией разными методами.&lt;/p&gt;

&lt;p&gt;Первое, что приходит в голову&amp;nbsp;&amp;mdash; увеличить количество операторов, принимающих вызовы. Это самый лучший способ, но и самый дорогой, по понятным причинам. Кроме того, операторы будут простаивать (просиживать) большую часть времени, если, конечно, у вас не непрерывный поток звонков.&lt;/p&gt;

&lt;p&gt;Второе, что можно сделать&amp;nbsp;&amp;mdash; добавить в систему обработки вызовов голосовое меню и предложить клиенты вместо ожидания заказать обратный звонок. Тоже неплохо, и даже будет работать во многих случаях. Но здесь важно, чтобы обратный звонок был совершен немедленно, т.к. клиент хочет говорить прямо сейчас. Плохая идея перезвонить сразу и поставить клиента в ту же очередь вызовов. Не каждый готов будет снова ждать, хоть и за счет компании.&lt;/p&gt;

&lt;p&gt;Третий вариант является логическим развитием второго. Если клиент не дождался, мы должны сами запланировать обратный звонок, но только так, чтобы этот звонок произвёл живой человек, т.к. чтобы с потенциальным клиентом сразу говорил специалист компании. Как опцию, можно предусмотреть предложение положить трубку и ожидать вызова оператором по мере освобождения, в виде голосового сообщения клиенту при входящем звонке. В качестве дополнительной заботы о клиенте, можно отправить ему СМС сообщение вида &lt;em&gt;&amp;laquo;К сожалению, вы не дождались ответа специалиста компании ХХХ, но мы вам обязательно перезвоним в ближайшее время!&amp;raquo;&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&#34;рассмотрим-третий-вариант-подробнее&#34;&gt;Рассмотрим третий вариант подробнее.&lt;/h3&gt;

&lt;p&gt;При поступлении входящего вызова, первым делом проверяем, является клиент новым, или он звонит повторно. В случае, если клиент уже обращался, хорошим тоном является соединение с тем же специалистом, с которым уже был разговор, причем, в зависимости от категории клиента, можно изменить приоритет вызова&amp;nbsp;&amp;mdash; например, соединить со специалистом, минуя очередь вызова. Точно так же можно поступить, если клиент ранее не звонил&amp;nbsp;&amp;mdash; сразу произвести попытку соединения со специалистом.&lt;/p&gt;

&lt;p&gt;В любом случае, если клиент не дождался ответа и положил трубку, регистрируем его номер в специальной кампании для коллбэка. Далее алгоритм следующий:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Если имеются свободные операторы, АТС производит вызов одному из операторов, сообщая, что это заявка на обратный звонок;&lt;/li&gt;
&lt;li&gt;Опционально подтверждаем готовность принять вызов;&lt;/li&gt;
&lt;li&gt;После соединения со специалистом, АТС набирает телефонный номер клиента и производит соединение со специалистом;&lt;/li&gt;
&lt;li&gt;В случае неответа или занятости номера клиента, алгоритм повторяется через некоторое время.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Как показывает практика, таким образом, приток новых клиентов повышается на величину до 70%.&lt;/p&gt;

&lt;p&gt;С удовольствием помогу настроить АТС на использование описанного алгоритма.&lt;/p&gt;

&lt;p&gt;Удачи в борьбе за клиента!&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Инкремент переменной в дайлплане Астериска</title>
      <link>https://ivahaev.ru/post/inkriemient-pieriemiennoi-v-dailplanie-astieriska/</link>
      <pubDate>Sat, 14 Nov 2015 12:34:30 +0500</pubDate>
      
      <guid>https://ivahaev.ru/post/inkriemient-pieriemiennoi-v-dailplanie-astieriska/</guid>
      <description>&lt;p&gt;Если требуется реализовать какой-то счетчик в дайлплане, удобно использовать переменную канала. Но просто так изменить её значение, прибавляя единицу, не получится.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;Нужно использовать выражение:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;same =&amp;gt; n,Set(REP=$[${REP} + 1])
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>Глубокий дебаг астериска</title>
      <link>https://ivahaev.ru/post/deep-debug-astierisk/</link>
      <pubDate>Thu, 12 Nov 2015 16:30:30 +0500</pubDate>
      
      <guid>https://ivahaev.ru/post/deep-debug-astierisk/</guid>
      <description>&lt;p&gt;Иногда можно потерять довольно много времени, пытаясь в консоли астериска отловить ошибку выполнения &lt;strong&gt;agi&lt;/strong&gt; скрипта, или просто внешнего приложения, запускаемого из дайлплана. Есть один способ, который в документации в явном виде не описан, но очень помогает. Мы запустим &lt;strong&gt;asterisk&lt;/strong&gt; в режиме, похожем на монопольный в &lt;strong&gt;1С&lt;/strong&gt;, при этом будем видеть в его консоли все предупреждения и ошибки.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Выключаем астериск;&lt;/li&gt;
&lt;li&gt;Выполняем такую команду:
&lt;code&gt;
su asterisk
asterisk -vvvgc
&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Теперь все как на ладони!&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Проигрывание файла при телефонном разговоре</title>
      <link>https://ivahaev.ru/post/proighryvaniie-faila-pri-tieliefonnom-razghovorie/</link>
      <pubDate>Wed, 11 Nov 2015 01:53:02 +0500</pubDate>
      
      <guid>https://ivahaev.ru/post/proighryvaniie-faila-pri-tieliefonnom-razghovorie/</guid>
      <description>&lt;p&gt;В работе оператора колл-центра часто возникает необходимость проиграть в канал заранее заготовленные голосовые файлы, например, адреса офисов и режимы работы.&lt;/p&gt;

&lt;p&gt;Рассмотрим вариант решения данной задачи на базе &lt;strong&gt;IP PBX Asterisk&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;Пример для &lt;strong&gt;FreePBX&lt;/strong&gt;, для голого астериска все делается ещё проще.&lt;/p&gt;

&lt;p&gt;Первым делом, нужно добавить сочетание клавиш на вызов макроса в &lt;code&gt;features.conf&lt;/code&gt;, или для &lt;strong&gt;FreePBX&lt;/strong&gt; в &lt;code&gt;features_applicationmap_custom.conf&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;playsound =&amp;gt; *6,callee,macro,playsound
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;По нажатию в разговоре *&lt;strong&gt;6&lt;/strong&gt; вызовется макрос playsound&lt;/p&gt;

&lt;p&gt;Важный момент, нужно добавить возможность вызова макроса. Для этого либо в дайлплане присваиваем переменную:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;exten =&amp;gt; _+x.,n,Set(DYNAMIC_FEATURES=playsound)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Либо в &lt;strong&gt;extensions.conf&lt;/strong&gt; пишем в секции &lt;strong&gt;[globals]&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DYNAMIC_FEATURES=playsound
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Макрос и нужный контекст в дайлплане:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[macro-playsound]

exten =&amp;gt; s,1,AGI(create_spy.php,${CHANNEL})

; end of [macro-playsound]

[spy]
exten =&amp;gt; 1,1,Chanspy(${chan},v(-4)wqBbE)
exten =&amp;gt; 1,n,Hangup

exten =&amp;gt; 2,1,Answer
exten =&amp;gt; 2,n,Set(VOLUME(TX)=-3)
exten =&amp;gt; 2,n,Playback(${audio})
exten =&amp;gt; 2,n,Hangup

; end of [spy]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Файл &lt;strong&gt;create_spy.agi&lt;/strong&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/usr/bin/php -q

&amp;lt;?php

$par=$argv[1];
$channel= $par;

    $uid=time();
    $f1=fopen(&amp;quot;/tmp/$uid.call&amp;quot;,&amp;quot;w&amp;quot;);
    fputs($f1,&amp;quot;Channel: LOCAL/2@spy\n&amp;quot;);
    fputs($f1,&amp;quot;MaxRetries: 0\n&amp;quot;);
    fputs($f1,&amp;quot;RetryTime: 600\n&amp;quot;);
    fputs($f1,&amp;quot;WaitTime: 30\n&amp;quot;);
    fputs($f1,&amp;quot;Context: spy\n&amp;quot;);
    fputs($f1,&amp;quot;Extension: 1\n&amp;quot;);
    fputs($f1,&amp;quot;Priority: 1\n&amp;quot;);
    fputs($f1,&amp;quot;Set: audio=custom/VOICE_FILE\nSet: chan=$channel\n&amp;quot;);
    fclose($f1);
    system(&amp;quot;mv /tmp/$uid.call /var/spool/asterisk/outgoing/&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Здесь &lt;strong&gt;VOICE_FILE&lt;/strong&gt; - это проигрываемый файл.  Не забыть сделать &lt;code&gt;chmod +x /var/lib/asterisk/agi-bin/create_spy.php&lt;/code&gt; ну или где в нашем дистрибутиве расположены &lt;strong&gt;agi&lt;/strong&gt; скрипты.&lt;/p&gt;

&lt;p&gt;Само собой, можно сделать все через &lt;strong&gt;AMI&lt;/strong&gt;, в данном случае, была задача показать вариант решения вопроса. Реализация за вами!&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>